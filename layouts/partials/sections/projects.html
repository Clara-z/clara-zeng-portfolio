{{ if .Site.Params.projects.enable | default false }}
<section id="projects" class="py-5">
    <div class="container">
        <h3 class="text-center">{{ .Site.Params.projects.title | default "Projects" }}</h3>
        <div class="row justify-content-center px-3 px-md-5">
            {{ range .Site.Params.projects.items }}
            <div class="col-lg-4 col-md-6 my-3">
                {{ $cardLink := "" }}
                {{ if .links }}
                    {{ range first 1 .links }}
                        {{ $cardLink = .url }}
                    {{ end }}
                {{ end }}
                <a href="{{ $cardLink }}" style="text-decoration: none; color: inherit;">
                    <div class="card my-3 h-100" title="{{ .title }}" style="cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; overflow: hidden; border: none; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 12px 30px rgba(0,0,0,0.2)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.1)';">
                        <!-- Image at top -->
                        <div class="card-img-wrapper" style="height: 180px; overflow: hidden;">
                            <img class="card-img-top" src="{{ .image }}" alt="{{ .title }}" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <!-- Content at bottom -->
                        <div class="card-body p-3" style="background: #fff;">
                            <div class="pb-2">
                                {{ range first 2 .badges }}
                                <span class="badge badge-secondary" style="font-size: 0.7rem; margin-right: 4px;">{{ . }}</span>
                                {{ end }}
                            </div>
                            <h6 class="card-title mt-1 mb-2" style="font-weight: 600; font-size: 0.95rem;">{{ .title }}</h6>
                            <p class="card-text" style="font-size: 0.85rem; color: #666; margin: 0;">
                                {{ .content }}
                            </p>
                        </div>
                    </div>
                </a>
            </div>
            {{ end }}
            {{ range ( where .Site.RegularPages "Type" "projects" ) }}
            {{ if .Params.showInHome | default true }}
            <div class="col-lg-4 col-md-6 my-3">
                <a href="{{ .RelPermalink }}" style="text-decoration: none; color: inherit;">
                    <div class="card my-3 h-100" title="{{ .Title }}" style="cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; overflow: hidden; border: none; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 12px 30px rgba(0,0,0,0.2)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.1)';">
                        <div class="card-img-wrapper" style="height: 180px; overflow: hidden;">
                            <img class="card-img-top" src="{{ .Params.image }}" alt="{{ .Title }}" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div class="card-body p-3" style="background: #fff;">
                            <div class="pb-2">
                                {{ range first 2 .Params.badges }}
                                <span class="badge badge-secondary" style="font-size: 0.7rem; margin-right: 4px;">{{ . }}</span>
                                {{ end }}
                            </div>
                            <h6 class="card-title mt-1 mb-2" style="font-weight: 600; font-size: 0.95rem;">{{ .Title | truncate 50 }}</h6>
                            <p class="card-text" style="font-size: 0.85rem; color: #666; margin: 0;">
                                {{ .Summary | truncate 100 | safeHTML }}
                            </p>
                        </div>
                    </div>
                </a>
            </div>
            {{ end }}
            {{ end }}
        </div>
    </div>
</section>
{{ end }}